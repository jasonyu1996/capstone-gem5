Bootstrap: docker
From: ubuntu:22.04

%help
    This container provides a build environment for the RISC-V
    cross compiler toolchain for RV64G. Just execute the container normally
    and pass NUM_THREADS as an argument for the desired number of threads to build with.

%post
    apt update && apt install -y build-essential git m4 scons zlib1g zlib1g-dev \
    libprotobuf-dev protobuf-compiler libprotoc-dev libgoogle-perftools-dev \
    python3-dev libboost-all-dev pkg-config mold

%runscript
    scons build/RISCVCapstone/gem5.debug --linker=mold --ignore-style -j$NUM_THREADS